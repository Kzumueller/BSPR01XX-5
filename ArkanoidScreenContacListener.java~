import com.badlogic.gdx.Screen;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.physics.box2d.World;
import com.badlogic.gdx.math.Vector2;
import com.badlogic.gdx.graphics.GL10;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.TextureAtlas;
import com.badlogic.gdx.scenes.scene2d.Stage;
import com.badlogic.gdx.physics.box2d.Body;
import com.badlogic.gdx.physics.box2d.Shape;
import com.badlogic.gdx.scenes.scene2d.Action;
import com.badlogic.gdx.scenes.scene2d.actions.Actions;
import com.badlogic.gdx.utils.Array;
import com.badlogic.gdx.graphics.g2d.TextureRegion;
import com.badlogic.gdx.scenes.scene2d.ui.Image;

public class ArkanoidScreen implements Screen
{
  int yellow[][] = {{462,230}, {154,150}, {110,210}, {154,190}, {462,150}, {110,130}, {154,110}, {154,230}, {462,190}, {462,110}, {110,90}, {110,170}, {506,210}, {506,130}, {506,90}, {506,170}, };
  int cyan[][] = {{242,230}, {374,110}, {374,210}, {286,90}, {374,230}, {242,90}, {286,230}, {242,110}, {242,210}, {374,90}, {330,230}, {330,90}, };
  int orange[][] = {{374,190}, {242,130}, {242,150}, {374,130}, {286,210}, {242,170}, {286,110}, {242,190}, {374,150}, {374,170}, {330,110}, {330,210}, };
  int grey[][] = {{198,190}, {198,110}, {198,210}, {198,230}, {198,130}, {198,150}, {198,90}, {198,170}, {418,150}, {418,90}, {418,170}, {418,190}, {418,110}, {418,210}, {418,230}, {418,130}, };
  int purple[][] = {{110,190}, {462,130}, {110,110}, {154,90}, {154,170}, {110,230}, {154,210}, {462,90}, {462,170}, {110,150}, {154,130}, {462,210}, {506,190}, {506,110}, {506,230}, {506,150}, };
  int green[][] = {{66,190}, {550,150}, {66,110}, {66,210}, {550,90}, {550,170}, {66,230}, {550,190}, {66,130}, {550,110}, {550,210}, {550,230}, {66,150}, {550,130}, {66,90}, {66,170}, };
  int red[][] = {{286,150}, {286,170}, {286,190}, {286,130}, {330,130}, {330,150}, {330,170}, {330,190}, };
  int blue[][] = {{462,70}, {242,70}, {462,250}, {242,250}, {374,70}, {198,70}, {110,70}, {374,250}, {66,70}, {198,250}, {110,250}, {66,250}, {286,250}, {154,250}, {550,70}, {286,70}, {154,70}, {550,250}, {330,70}, {330,250}, {506,70}, {506,250}, {418,70}, {418,250}, };
  
  World world;
  Stage stage;

  public void addBricks(TextureRegion region, int bricks[][])
  {
    for (int i = 0; i < bricks.length; i++)
      {
	Body body = Box2DTools.createStaticBody(world, bricks[i][0], 700-bricks[i][1]);
	Brick brick = new Brick(body, region);
	stage.addActor(brick);
      }
  }

  public void show()
  {
    stage = new Stage();
    world = new World(new Vector2(0,-9.91f), true);
    TextureAtlas atlas = new TextureAtlas(Gdx.files.internal("data/sprites-packed/pack.atlas"));
    
    stage.addActor(new Image(new TextureRegion(new Texture(Gdx.files.internal("data/background600x800.png")),
					       600, 700)));

    Paddle paddle = new Paddle(world, atlas.findRegion("paddleBig"));
    stage.addActor(paddle);
	
    Ball ball = new Ball( world,  atlas.findRegion("ball")); 
    stage.addActor(ball);
 
    makeBorder(-8);
    makeBorder(Gdx.graphics.getWidth());
    
    addBricks(atlas.findRegion("yellow"), yellow);
    addBricks(atlas.findRegion("cyan"), cyan);
    addBricks(atlas.findRegion("orange"), orange);
    addBricks(atlas.findRegion("grey"), grey);
    addBricks(atlas.findRegion("purple"), purple);
    addBricks(atlas.findRegion("green"), green);
    addBricks(atlas.findRegion("red"), red);
    addBricks(atlas.findRegion("blue"), blue );
  }

  public void makeBorder(float x)
  {
    Body body = Box2DTools.createStaticBody(world, x, Gdx.graphics.getHeight()*0.5f);
    Shape box = Box2DTools.createBoxShape(16,Gdx.graphics.getHeight());
    Box2DTools.addFixtureToBody( body, box, 1 );
  }

  public void render(float delta)
  {
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
    world.step(delta, 8, 6);
    stage.act(delta);
    stage.draw();
  }

  public void dispose()
  {
  }

  public void pause()
  {
  }

  public void resume()
  {
  }

  public void hide()
  {
  }

  public void resize(int w, int h)
  {
  }
}
